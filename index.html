<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Phonics Game üéµ</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      background: linear-gradient(135deg, #6a11cb, #2575fc);
      color: white;
      margin: 0;
      padding: 20px;
    }
    h1 {
      margin-bottom: 10px;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(6, 1fr);
      gap: 8px;
      justify-items: center;
      margin: 20px auto;
      max-width: 400px;
    }
    button.letter {
      width: 55px;
      height: 55px;
      font-size: 20px;
      font-weight: bold;
      border: none;
      border-radius: 8px;
      color: white;
      cursor: pointer;
      background: linear-gradient(135deg, #ff6a00, #ee0979);
      transition: transform 0.1s;
    }
    button.letter:active {
      transform: scale(0.9);
    }
    .controls {
      margin: 15px 0;
    }
    button.control {
      background: #111;
      color: white;
      font-weight: bold;
      border: none;
      border-radius: 6px;
      padding: 10px 16px;
      margin: 5px;
      cursor: pointer;
    }
    button.control:hover {
      background: #333;
    }
    .now-playing {
      margin-top: 15px;
      padding: 10px;
      border-radius: 8px;
      background: white;
      color: black;
      max-width: 400px;
      margin-left: auto;
      margin-right: auto;
    }
  </style>
</head>
<body>
  <h1>Phonics Game üéµ</h1>

  <div class="grid" id="grid"></div>

  <div class="controls">
    <button class="control" onclick="stopAll()">‚èπ Stop All</button>
    <button class="control" onclick="playAtoZ()">üîä Play A ‚Üí Z</button>
  </div>

  <div class="now-playing">
    <strong>Now Playing:</strong> <span id="nowPlaying">(none)</span>
  </div>

  <script>
    const letters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");
    const grid = document.getElementById("grid");
    const nowPlaying = document.getElementById("nowPlaying");
    let activeAudios = [];

    // Try local repo MP3 first, fallback to Google Drive
    const driveLinks = {
      "A": "https://drive.google.com/uc?export=download&id=1Qe1aCr14oUrDU-6EMcxzeAyMU8NMXfae",
      "B": "https://drive.google.com/uc?export=download&id=10IJYuYVMFQJGHycrLFCX6zG4yz41qmWJ",
      "C": "https://drive.google.com/uc?export=download&id=15R8QN67z2I2fQajmObMkBWkobcpczK2M",
      "D": "https://drive.google.com/uc?export=download&id=1jUcdWAYesbmdOkfs-0sSsAJ9WEjBM3NI",
      "E": "https://drive.google.com/uc?export=download&id=12YSf9qsSJru0tAtsGBeYiYt2gQ0Dztgr",
      "F": "https://drive.google.com/uc?export=download&id=1oqmBDnCIeXiZvfJYnSgg3kZP9Iw6qyFM",
      "G": "https://drive.google.com/uc?export=download&id=1hnhna5SXk7qCMP4Z_eV1I5b5fLLW4TXv",
      "H": "https://drive.google.com/uc?export=download&id=1OY8rgUAilYGOD0yjZ9mD16TzoelEsPrC",
      "I": "https://drive.google.com/uc?export=download&id=1vXiQpBw4Q-kPp0uvtydnC7KS6fQvew4D",
      "J": "https://drive.google.com/uc?export=download&id=194ZXxUJISwq5vkB94SZ_gJ_annsgVxy3",
      "K": "https://drive.google.com/uc?export=download&id=12z_yfJUmhkd5LN1poMN2dNgXO1yyCSEA",
      "L": "https://drive.google.com/uc?export=download&id=1HHPYFY4p-Z__6SZKEKgSOCBug4gsIGC1",
      "M": "https://drive.google.com/uc?export=download&id=1zuOsAkuCo4bRV9LGl-ElNNjA2y5bTJa7",
      "N": "https://drive.google.com/uc?export=download&id=1PiG51Z1neVqxVGvWxotHwhUd3-Ljb5Jy",
      "O": "https://drive.google.com/uc?export=download&id=11ymp4cEflp3FIzJN3XYdalDdv8lqJLkX",
      "P": "https://drive.google.com/uc?export=download&id=1YiqPEjT5C4gY8M7B6w3ykf8r4GdQQeeH",
      "Q": "https://drive.google.com/uc?export=download&id=1ZOGnULcvvf8aNTWeZdjCB93xmcFnZVPb",
      "R": "https://drive.google.com/uc?export=download&id=1QleiMuwxKQnlF4vfciQFxpLwEq7oV4zO",
      "S": "https://drive.google.com/uc?export=download&id=1XBvC4nse_amvfLiLBReiEpDHcAfJ7Z1T",
      "T": "https://drive.google.com/uc?export=download&id=1lPK7U4XqhbCY2eV9eNnHKmWyWMGljm3k",
      "U": "https://drive.google.com/uc?export=download&id=13_Z4QA5fP6KzU0myieJD1ZG2IMU_aU6i",
      "V": "https://drive.google.com/uc?export=download&id=1EKd7dITWTuEwIlVOQ_dq1Fy3BIfVJ6zA",
      "W": "https://drive.google.com/uc?export=download&id=1Bh8Wx6tXfbwA1_KW4tHaMKd3Vmc2MQ3y",
      "X": "https://drive.google.com/uc?export=download&id=1NqCJc7LGjdnGMDPnkmHY3qZx-PphRuxw",
      "Y": "https://drive.google.com/uc?export=download&id=1GKyvE5x-aR_mlwXLBwDGEpGowwjR_Nnd",
      "Z": "https://drive.google.com/uc?export=download&id=1K4J-Lu0zWHjk6ciMVxw_JuPiOrIuXXmZ"
    };

    function getAudioSrc(letter) {
      return `${letter}.mp3`; // repo local file
    }

    function playLetter(letter) {
      let audio = new Audio(getAudioSrc(letter));
      audio.onerror = () => {
        // fallback to Google Drive if local not found
        audio = new Audio(driveLinks[letter]);
        audio.play().catch(err => console.log("Error:", err));
      };
      audio.play().catch(err => console.log("Error:", err));

      activeAudios.push(audio);
      updateNowPlaying(letter);

      audio.onended = () => {
        activeAudios = activeAudios.filter(a => a !== audio);
        if (activeAudios.length === 0) updateNowPlaying(null);
      };
    }

    function updateNowPlaying(letter) {
      if (!letter) {
        nowPlaying.textContent = activeAudios.length ? "(multiple)" : "(none)";
      } else {
        const playing = activeAudios.length > 1
          ? activeAudios.length + " sounds"
          : letter;
        nowPlaying.textContent = playing;
      }
    }

    function stopAll() {
      activeAudios.forEach(a => a.pause());
      activeAudios = [];
      updateNowPlaying(null);
    }

    async function playAtoZ() {
      stopAll();
      for (let i = 0; i < letters.length; i++) {
        await new Promise(resolve => {
          let audio = new Audio(getAudioSrc(letters[i]));
          audio.onerror = () => {
            audio = new Audio(driveLinks[letters[i]]);
          };
          audio.onloadedmetadata = () => {
            audio.play();
            setTimeout(resolve, audio.duration * 700); // 70%
          };
          audio.play().catch(err => resolve());
        });
      }
    }

    // create alphabet buttons
    letters.forEach(l => {
      const btn = document.createElement("button");
      btn.className = "letter";
      btn.textContent = l;
      btn.onclick = () => playLetter(l);
      grid.appendChild(btn);
    });
  </script>
</body>
</html>
